<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }
        
        .header p {
            margin: 0;
            opacity: 0.9;
        }
        
        .controls {
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .progress-bar {
            flex: 1;
            min-width: 200px;
        }
        
        .progress-bar label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        
        .progress {
            width: 100%;
            height: 25px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
            border-radius: 15px;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #495057;
            font-weight: bold;
            font-size: 12px;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-reset {
            background: #dc3545;
            color: white;
        }
        
        .btn-reset:hover {
            background: #c82333;
        }
        
        .btn-week-reset {
            background: #fd7e14;
            color: white;
        }
        
        .btn-week-reset:hover {
            background: #e66300;
        }
        
        .content {
            padding: 30px;
        }
        
        .day-section {
            margin-bottom: 30px;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .day-header {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .day-title {
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .day-progress {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .task-list {
            padding: 0;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f8f9fa;
            transition: background-color 0.2s ease;
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-item:hover {
            background-color: #f8f9fa;
        }
        
        .task-item.completed {
            background-color: #d4edda;
            opacity: 0.8;
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            transform: scale(1.2);
        }
        
        .task-details {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr 2fr 1fr 2fr;
            gap: 15px;
            align-items: center;
        }
        
        .task-time {
            font-weight: bold;
            color: #fd7e14;
        }
        
        .task-activity {
            font-weight: 600;
            color: #495057;
        }
        
        .task-mode {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .mode-aerobic {
            background: #d4edda;
            color: #155724;
        }
        
        .mode-strength {
            background: #fff3cd;
            color: #856404;
        }
        
        .mode-stretch {
            background: #f8d7da;
            color: #721c24;
        }
        
        .mode-none {
            background: #e2e3e5;
            color: #6c757d;
        }
        
        .task-point {
            font-size: 0.9em;
            color: #6c757d;
        }
        
        .completed .task-details {
            text-decoration: line-through;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .task-details {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .task-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-checkbox {
                margin-bottom: 10px;
            }
        }
        
        .stats {
            background: #f8f9fa;
            padding: 20px;
            margin-top: 30px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stats h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‹ï¸ ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆ ã‚¿ã‚¹ã‚¯ç®¡ç†</h1>
            <p>æ—¥ã€…ã®é‹å‹•è¨ˆç”»ã‚’ç®¡ç†ã—ã¦ã€å¥åº·çš„ãªç¿’æ…£ã‚’èº«ã«ã¤ã‘ã‚ˆã†ï¼</p>
        </div>
        
        <div class="controls">
            <div class="progress-bar">
                <label>ä»Šæ—¥ã®é€²æ—</label>
                <div class="progress">
                    <div class="progress-fill" id="dailyProgress"></div>
                    <div class="progress-text" id="dailyProgressText">0%</div>
                </div>
            </div>
            <div class="buttons">
                <button class="btn btn-reset" onclick="resetDailyTasks()">ä»Šæ—¥ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
                <button class="btn btn-week-reset" onclick="resetWeeklyTasks()">é€±ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
        
        <div class="content">
            <div id="taskContainer"></div>
            
            <div class="stats">
                <h3>ğŸ“Š çµ±è¨ˆæƒ…å ±</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="todayCompletedCount">0</div>
                        <div class="stat-label">ä»Šæ—¥å®Œäº†</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="weekCompletedCount">0</div>
                        <div class="stat-label">ä»Šé€±å®Œäº†</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="weeklyCompletionRate">0%</div>
                        <div class="stat-label">é€±é–“é”æˆç‡</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalTasks">0</div>
                        <div class="stat-label">ç·ã‚¿ã‚¹ã‚¯æ•°</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿
        const taskData = [
            // æœˆæ›œæ—¥
            { day: 'æœˆ', time: '16:45-17:00', activity: 'ä»•äº‹ç‰‡ä»˜ã‘', mode: 'none', point: 'å¤•é£Ÿå‰ã®æº–å‚™' },
            { day: 'æœˆ', time: '17:00-17:10', activity: 'ç€æ›¿ãˆãƒ»æ°´åˆ†è£œçµ¦', mode: 'none', point: 'é‹å‹•å‰ã®æº–å‚™' },
            { day: 'æœˆ', time: '17:10-17:40', activity: 'ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆæœ‰é…¸ç´ ãƒ¢ãƒ¼ãƒ‰', mode: 'aerobic', point: 'ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼1-2ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆã‚¸ãƒ§ã‚®ãƒ³ã‚°å¤šã‚ãƒ«ãƒ¼ãƒˆï¼‰' },
            { day: 'æœˆ', time: '17:40-17:45', activity: 'ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³', mode: 'none', point: 'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
            { day: 'æœˆ', time: '17:45-18:30', activity: 'å¤•é£Ÿ', mode: 'none', point: 'é£Ÿå‰é‹å‹•ã§é£Ÿæ¬²æŠ‘åˆ¶' },
            
            // ç«æ›œæ—¥
            { day: 'ç«', time: '17:30-18:30', activity: 'å¤•é£Ÿ', mode: 'none', point: 'é£Ÿäº‹ã‚¿ã‚¤ãƒ ' },
            { day: 'ç«', time: '18:30-19:45', activity: 'ä¼‘æ†©ãƒ»æ¶ˆåŒ–ã‚¿ã‚¤ãƒ ', mode: 'none', point: 'é£Ÿå¾Œ1æ™‚é–“ä»¥ä¸Šç©ºã‘ã‚‹' },
            { day: 'ç«', time: '19:45-19:55', activity: 'ç€æ›¿ãˆãƒ»æ°´åˆ†è£œçµ¦', mode: 'none', point: 'é‹å‹•å‰ã®æº–å‚™' },
            { day: 'ç«', time: '19:55-20:25', activity: 'ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆç­‹ãƒˆãƒ¬ãƒ¢ãƒ¼ãƒ‰', mode: 'strength', point: 'ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ/ãƒãƒ³ã‚¶ã‚¤ãƒ—ãƒƒã‚·ãƒ¥/ãƒ—ãƒ©ãƒ³ã‚¯/è…¹ç­‹ã‚¬ãƒ¼ãƒ‰å„2ã‚»ãƒƒãƒˆ' },
            { day: 'ç«', time: '20:25-20:30', activity: 'ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³', mode: 'none', point: 'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
            
            // æ°´æ›œæ—¥
            { day: 'æ°´', time: '16:45-17:00', activity: 'ä»•äº‹ç‰‡ä»˜ã‘', mode: 'none', point: 'å¤•é£Ÿå‰ã®æº–å‚™' },
            { day: 'æ°´', time: '17:00-17:10', activity: 'ç€æ›¿ãˆãƒ»æ°´åˆ†è£œçµ¦', mode: 'none', point: 'é‹å‹•å‰ã®æº–å‚™' },
            { day: 'æ°´', time: '17:10-17:40', activity: 'ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆæœ‰é…¸ç´ ãƒ¢ãƒ¼ãƒ‰', mode: 'aerobic', point: 'ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼1-2ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆã‚¸ãƒ§ã‚®ãƒ³ã‚°å¤šã‚ãƒ«ãƒ¼ãƒˆï¼‰' },
            { day: 'æ°´', time: '17:40-17:45', activity: 'ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³', mode: 'none', point: 'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
            { day: 'æ°´', time: '17:45-18:30', activity: 'å¤•é£Ÿ', mode: 'none', point: 'é£Ÿå‰é‹å‹•ã§é£Ÿæ¬²æŠ‘åˆ¶' },
            
            // æœ¨æ›œæ—¥
            { day: 'æœ¨', time: '17:30-18:30', activity: 'å¤•é£Ÿ', mode: 'none', point: 'é£Ÿäº‹ã‚¿ã‚¤ãƒ ' },
            { day: 'æœ¨', time: '18:30-19:45', activity: 'ä¼‘æ†©ãƒ»æ¶ˆåŒ–ã‚¿ã‚¤ãƒ ', mode: 'none', point: 'é£Ÿå¾Œ1æ™‚é–“ä»¥ä¸Šç©ºã‘ã‚‹' },
            { day: 'æœ¨', time: '19:45-19:55', activity: 'ç€æ›¿ãˆãƒ»æ°´åˆ†è£œçµ¦', mode: 'none', point: 'é‹å‹•å‰ã®æº–å‚™' },
            { day: 'æœ¨', time: '19:55-20:25', activity: 'ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆç­‹ãƒˆãƒ¬ãƒ¢ãƒ¼ãƒ‰', mode: 'strength', point: 'ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ/ãƒãƒ³ã‚¶ã‚¤ãƒ—ãƒƒã‚·ãƒ¥/ãƒ—ãƒ©ãƒ³ã‚¯/è…¹ç­‹ã‚¬ãƒ¼ãƒ‰å„2ã‚»ãƒƒãƒˆ' },
            { day: 'æœ¨', time: '20:25-20:30', activity: 'ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³', mode: 'none', point: 'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
            
            // é‡‘æ›œæ—¥
            { day: 'é‡‘', time: '16:45-17:00', activity: 'ä»•äº‹ç‰‡ä»˜ã‘', mode: 'none', point: 'å¤•é£Ÿå‰ã®æº–å‚™' },
            { day: 'é‡‘', time: '17:00-17:10', activity: 'ç€æ›¿ãˆãƒ»æ°´åˆ†è£œçµ¦', mode: 'none', point: 'é‹å‹•å‰ã®æº–å‚™' },
            { day: 'é‡‘', time: '17:10-17:40', activity: 'ãƒªãƒ³ã‚°ãƒ•ã‚£ãƒƒãƒˆæœ‰é…¸ç´ ãƒ¢ãƒ¼ãƒ‰', mode: 'aerobic', point: 'ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼1-2ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆã‚¸ãƒ§ã‚®ãƒ³ã‚°å¤šã‚ãƒ«ãƒ¼ãƒˆï¼‰' },
            { day: 'é‡‘', time: '17:40-17:45', activity: 'ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³', mode: 'none', point: 'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
            { day: 'é‡‘', time: '17:45-18:30', activity: 'å¤•é£Ÿ', mode: 'none', point: 'é£Ÿå‰é‹å‹•ã§é£Ÿæ¬²æŠ‘åˆ¶' },
            
            // åœŸæ›œæ—¥
            { day: 'åœŸ', time: 'å¥½ããªæ™‚é–“', activity: '5åˆ†ã‚¹ãƒˆãƒ¬ãƒƒãƒ', mode: 'stretch', point: 'ä¸Šä½“ä¼¸ã°ã—ã€ä½“å´ã€å‰å±ˆã€ã‚­ãƒ£ãƒƒãƒˆï¼†ã‚«ã‚¦ã€å¤ªã‚‚ã‚‚ã€ãƒªãƒ³ã‚°ã‚³ãƒ³èƒ¸é–‹ã' },
            
            // æ—¥æ›œæ—¥
            { day: 'æ—¥', time: 'ãªã—', activity: 'ä¼‘é¤Šæ—¥', mode: 'none', point: 'å®Œå…¨ã‚ªãƒ•' }
        ];

        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼
        const STORAGE_KEY = 'ringfit_tasks';
        const STORAGE_DATE_KEY = 'ringfit_last_date';

        // ç¾åœ¨ã®æ—¥ä»˜ã‚’å–å¾—
        function getCurrentDate() {
            return new Date().toDateString();
        }

        // ç¾åœ¨ã®é€±ã®é–‹å§‹æ—¥ã‚’å–å¾—ï¼ˆæœˆæ›œæ—¥ï¼‰
        function getWeekStartDate() {
            const today = new Date();
            const day = today.getDay();
            const diff = today.getDate() - day + (day === 0 ? -6 : 1);
            return new Date(today.setDate(diff)).toDateString();
        }

        // ã‚¿ã‚¹ã‚¯ã®å®Œäº†çŠ¶æ…‹ã‚’ä¿å­˜
        function saveTaskState() {
            const completedTasks = {};
            document.querySelectorAll('.task-checkbox').forEach((checkbox, index) => {
                completedTasks[index] = checkbox.checked;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(completedTasks));
            localStorage.setItem(STORAGE_DATE_KEY, getCurrentDate());
        }

        // ã‚¿ã‚¹ã‚¯ã®å®Œäº†çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿
        function loadTaskState() {
            const lastDate = localStorage.getItem(STORAGE_DATE_KEY);
            const currentDate = getCurrentDate();
            
            // æ—¥ä»˜ãŒå¤‰ã‚ã£ãŸå ´åˆã¯ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ
            if (lastDate !== currentDate) {
                resetDailyTasksInternal();
                return {};
            }
            
            const saved = localStorage.getItem(STORAGE_KEY);
            return saved ? JSON.parse(saved) : {};
        }

        // ä»Šæ—¥ã®æ›œæ—¥ã‚’å–å¾—
        function getTodayDayName() {
            const days = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            return days[new Date().getDay()];
        }

        // ãƒ¢ãƒ¼ãƒ‰ã®ã‚¯ãƒ©ã‚¹åã‚’å–å¾—
        function getModeClass(mode) {
            const modeMap = {
                'aerobic': 'mode-aerobic',
                'strength': 'mode-strength',
                'stretch': 'mode-stretch',
                'none': 'mode-none'
            };
            return modeMap[mode] || 'mode-none';
        }

        // ãƒ¢ãƒ¼ãƒ‰ã®è¡¨ç¤ºåã‚’å–å¾—
        function getModeDisplayName(mode) {
            const modeMap = {
                'aerobic': 'æœ‰é…¸ç´ ',
                'strength': 'ç­‹ãƒˆãƒ¬',
                'stretch': 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ',
                'none': 'ãªã—'
            };
            return modeMap[mode] || 'ãªã—';
        }

        // ã‚¿ã‚¹ã‚¯ã‚’æ—¥åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
        function groupTasksByDay() {
            const grouped = {};
            taskData.forEach((task, index) => {
                if (!grouped[task.day]) {
                    grouped[task.day] = [];
                }
                grouped[task.day].push({ ...task, index });
            });
            return grouped;
        }

        // ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’æç”»
        function renderTasks() {
            const container = document.getElementById('taskContainer');
            const groupedTasks = groupTasksByDay();
            const completedTasks = loadTaskState();
            const todayDayName = getTodayDayName();
            
            container.innerHTML = '';
            
            // ä»Šæ—¥ã‚’æœ€åˆã«è¡¨ç¤º
            const dayOrder = [todayDayName, ...Object.keys(groupedTasks).filter(day => day !== todayDayName)];
            
            dayOrder.forEach(day => {
                if (!groupedTasks[day]) return;
                
                const isToday = day === todayDayName;
                const dayTasks = groupedTasks[day];
                const completedInDay = dayTasks.filter(task => completedTasks[task.index]).length;
                const progressPercent = Math.round((completedInDay / dayTasks.length) * 100);
                
                const daySection = document.createElement('div');
                daySection.className = `day-section ${isToday ? 'today' : ''}`;
                
                daySection.innerHTML = `
                    <div class="day-header" style="${isToday ? 'background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);' : ''}">
                        <div class="day-title">${day}æ›œæ—¥ ${isToday ? '(ä»Šæ—¥)' : ''}</div>
                        <div class="day-progress">${completedInDay}/${dayTasks.length} (${progressPercent}%)</div>
                    </div>
                    <div class="task-list">
                        ${dayTasks.map(task => `
                            <div class="task-item ${completedTasks[task.index] ? 'completed' : ''}">
                                <input type="checkbox" class="task-checkbox" data-index="${task.index}" 
                                       ${completedTasks[task.index] ? 'checked' : ''}>
                                <div class="task-details">
                                    <div class="task-time">${task.time}</div>
                                    <div class="task-activity">${task.activity}</div>
                                    <div class="task-mode ${getModeClass(task.mode)}">${getModeDisplayName(task.mode)}</div>
                                    <div class="task-point">${task.point}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(daySection);
            });
            
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const taskItem = checkbox.closest('.task-item');
                    if (checkbox.checked) {
                        taskItem.classList.add('completed');
                    } else {
                        taskItem.classList.remove('completed');
                    }
                    saveTaskState();
                    updateProgress();
                    updateStats();
                });
            });
        }

        // é€²æ—ãƒãƒ¼ã‚’æ›´æ–°
        function updateProgress() {
            const todayDayName = getTodayDayName();
            const todayTasks = taskData.filter(task => task.day === todayDayName);
            const completedTasks = loadTaskState();
            const todayCompleted = todayTasks.filter((task, index) => {
                const globalIndex = taskData.indexOf(task);
                return completedTasks[globalIndex];
            }).length;
            
            const progressPercent = todayTasks.length > 0 ? Math.round((todayCompleted / todayTasks.length) * 100) : 0;
            
            const progressFill = document.getElementById('dailyProgress');
            const progressText = document.getElementById('dailyProgressText');
            
            progressFill.style.width = `${progressPercent}%`;
            progressText.textContent = `${progressPercent}% (${todayCompleted}/${todayTasks.length})`;
        }

        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        function updateStats() {
            const completedTasks = loadTaskState();
            const todayDayName = getTodayDayName();
            
            // ä»Šæ—¥å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯æ•°
            const todayTasks = taskData.filter(task => task.day === todayDayName);
            const todayCompleted = todayTasks.filter((task, index) => {
                const globalIndex = taskData.indexOf(task);
                return completedTasks[globalIndex];
            }).length;
            
            // ä»Šé€±å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯æ•°
            const weekCompleted = Object.values(completedTasks).filter(Boolean).length;
            
            // é€±é–“é”æˆç‡
            const weeklyCompletionRate = Math.round((weekCompleted / taskData.length) * 100);
            
            document.getElementById('todayCompletedCount').textContent = todayCompleted;
            document.getElementById('weekCompletedCount').textContent = weekCompleted;
            document.getElementById('weeklyCompletionRate').textContent = `${weeklyCompletionRate}%`;
            document.getElementById('totalTasks').textContent = taskData.length;
        }

        // ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆå†…éƒ¨é–¢æ•°ï¼‰
        function resetDailyTasksInternal() {
            const todayDayName = getTodayDayName();
            const completedTasks = loadTaskState();
            
            taskData.forEach((task, index) => {
                if (task.day === todayDayName) {
                    completedTasks[index] = false;
                }
            });
            
            localStorage.setItem(STORAGE_KEY, JSON.stringify(completedTasks));
            localStorage.setItem(STORAGE_DATE_KEY, getCurrentDate());
        }

        // ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œï¼‰
        function resetDailyTasks() {
            if (confirm('ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                resetDailyTasksInternal();
                renderTasks();
                updateProgress();
                updateStats();
            }
        }

        // é€±ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ
        function resetWeeklyTasks() {
            if (confirm('ä»Šé€±ã®ã‚¿ã‚¹ã‚¯ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem(STORAGE_DATE_KEY);
                renderTasks();
                updateProgress();
                updateStats();
            }
        }

        // åˆæœŸåŒ–
        function init() {
            renderTasks();
            updateProgress();
            updateStats();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>